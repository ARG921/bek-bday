<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Birthify Bebek</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Satisfy&family=DM+Sans:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{--sg:#1DB954;--sb:#121212;--sd:#181818;--sl:#b3b3b3;--sw:#fff}
body{font-family:'DM Sans',sans-serif;background:var(--sb);color:var(--sw);min-height:100dvh;overflow:hidden}
.player-screen{display:flex;flex-direction:column;align-items:center;justify-content:space-between;min-height:100dvh;padding:50px 24px 36px;background:linear-gradient(180deg,#2a4a6b 0%,#1a2a3a 35%,var(--sb) 70%);transition:opacity .5s,transform .5s;position:relative;z-index:10}
.player-screen.hidden{opacity:0;transform:scale(.95);pointer-events:none;position:absolute;top:0;left:0;right:0}
.top-bar{display:flex;justify-content:space-between;align-items:center;width:100%;max-width:420px}
.top-bar svg{cursor:pointer;opacity:.7}
.album-container{width:100%;max-width:360px;aspect-ratio:1;cursor:pointer;margin:8px 0}
.album-art{width:100%;height:100%;border-radius:8px;background:linear-gradient(135deg,#3a6a9a 0%,#1a3a5a 60%,#8a7a6a 100%);box-shadow:0 8px 40px rgba(0,0,0,.5);position:relative;overflow:hidden;transition:transform .3s}
.album-art:active{transform:scale(.97)}
.album-art .title-text{font-family:'Satisfy',cursive;position:absolute;top:24px;left:50%;transform:translateX(-50%);text-align:center;z-index:2}
.album-art .title-text .asian{font-size:38px;color:#f0c8a0;display:block;text-shadow:2px 2px 8px rgba(0,0,0,.3)}
.album-art .title-text .teen{font-size:34px;color:#e8a8b0;font-style:italic;display:block;margin-top:-8px;text-shadow:2px 2px 8px rgba(0,0,0,.3)}
.album-art .mountain{position:absolute;bottom:0;width:100%;height:55%;background:linear-gradient(160deg,#c8b8a0,#a89878 40%,#988868);clip-path:polygon(0% 60%,15% 30%,30% 50%,45% 15%,60% 40%,75% 20%,90% 45%,100% 25%,100% 100%,0% 100%)}
.album-art .person-silhouette{position:absolute;bottom:25%;left:50%;transform:translateX(-50%);width:80px;height:140px;z-index:2}
.person-silhouette .head{width:32px;height:32px;background:#2a2a2a;border-radius:50%;margin:0 auto 4px}
.person-silhouette .body-shape{width:52px;height:70px;background:#f0f0f0;border-radius:12px 12px 6px 6px;margin:0 auto}
.person-silhouette .legs{display:flex;justify-content:center;gap:6px;margin-top:2px}
.person-silhouette .leg{width:16px;height:36px;background:#e8e0d8;border-radius:4px}
.album-art .hanssen-text{position:absolute;bottom:12%;width:100%;text-align:center;font-family:'DM Sans',sans-serif;font-size:28px;font-weight:700;letter-spacing:14px;text-indent:14px;color:white;text-shadow:2px 2px 12px rgba(0,0,0,.5);z-index:3}
.tap-hint{font-size:11px;color:var(--sl);opacity:.6;margin-top:4px;animation:ph 2s ease-in-out infinite}
@keyframes ph{0%,100%{opacity:.3}50%{opacity:.7}}
.lyrics-section{width:100%;max-width:420px;height:76px;overflow:hidden;position:relative;margin-bottom:2px}
.lyrics-section::before,.lyrics-section::after{content:'';position:absolute;left:0;right:0;height:18px;z-index:2;pointer-events:none}
.lyrics-section::before{top:0;background:linear-gradient(180deg,rgba(18,18,18,.7),transparent)}
.lyrics-section::after{bottom:0;background:linear-gradient(0deg,rgba(18,18,18,.7),transparent)}
.lyrics-track{transition:transform .4s cubic-bezier(.25,.1,.25,1);padding-top:26px}
.lyric-line{font-size:15px;font-weight:700;color:rgba(255,255,255,.22);padding:2.5px 0;transition:color .35s,transform .35s;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1.45}
.lyric-line.active{color:var(--sw);transform:scale(1.02);transform-origin:left center}
.lyric-line.passed{color:rgba(255,255,255,.32)}
.song-info{width:100%;max-width:420px}
.song-title{font-size:20px;font-weight:700;margin-bottom:2px}
.song-artist{font-size:14px;color:var(--sl)}
.song-title-row{display:flex;justify-content:space-between;align-items:center}
.liked-icon{width:28px;height:28px;background:var(--sg);border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.liked-icon svg{width:16px;height:16px}
.progress-section{width:100%;max-width:420px;margin:10px 0}
.progress-bar-bg{width:100%;height:4px;background:#404040;border-radius:2px;cursor:pointer;position:relative}
.progress-bar-fill{height:100%;background:var(--sw);border-radius:2px;width:0%;position:relative}
.progress-bar-fill::after{content:'';position:absolute;right:-6px;top:-4px;width:12px;height:12px;background:white;border-radius:50%;opacity:0;transition:opacity .2s}
.progress-bar-bg:hover .progress-bar-fill::after,.progress-bar-bg:active .progress-bar-fill::after{opacity:1}
.progress-bar-bg:hover .progress-bar-fill{background:var(--sg)}
.progress-times{display:flex;justify-content:space-between;margin-top:6px;font-size:11px;color:var(--sl)}
.controls{display:flex;align-items:center;justify-content:space-between;width:100%;max-width:340px}
.controls svg{cursor:pointer;fill:var(--sl);transition:fill .2s,transform .15s}
.controls svg:hover{fill:white}
.controls svg:active{transform:scale(.9)}
.play-btn{width:64px;height:64px;background:white;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .15s}
.play-btn:hover{transform:scale(1.06)}
.play-btn:active{transform:scale(.95)}
.play-btn svg{fill:black!important}
.birthday-screen{position:fixed;top:0;left:0;right:0;bottom:0;background:var(--sb);z-index:20;opacity:0;transform:scale(1.05);pointer-events:none;transition:opacity .5s,transform .5s;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch}
.birthday-screen.active{opacity:1;transform:scale(1);pointer-events:all}
.birthday-inner{min-height:100%;padding:0 24px 60px;max-width:480px;margin:0 auto}
.bday-back{position:sticky;top:0;background:linear-gradient(180deg,var(--sb) 60%,transparent);padding:16px 0;z-index:30;display:flex;align-items:center;gap:12px;cursor:pointer}
.bday-back span{font-size:14px;font-weight:600;color:var(--sl)}
.bday-header{text-align:center;padding:20px 0 30px}
.bday-header .greeting-top{font-family:'Satisfy',cursive;font-size:22px;color:var(--sg);margin-bottom:4px}
.bday-header h1{font-family:'Playfair Display',serif;font-size:42px;font-weight:700;background:linear-gradient(135deg,#1DB954,#1ed760,#a8e6cf);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1.1;margin-bottom:6px}
.bday-header .bday-name{font-family:'Satisfy',cursive;font-size:52px;color:#f0c8a0;text-shadow:0 0 30px rgba(240,200,160,.3)}
.bday-header .bday-sub{font-size:14px;color:var(--sl);margin-top:8px}
#confetti-canvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:25}
.message-card{background:var(--sd);border-radius:12px;padding:24px;margin-bottom:16px;border:1px solid rgba(255,255,255,.05);opacity:0;transform:translateY(30px);transition:opacity .6s,transform .6s;position:relative;overflow:hidden}
.message-card.visible{opacity:1;transform:translateY(0)}
.message-card::before{content:'';position:absolute;top:0;left:0;width:4px;height:100%;border-radius:4px 0 0 4px}
.message-card .card-emoji{font-size:32px;margin-bottom:12px;display:block}
.message-card h3{font-family:'Playfair Display',serif;font-size:20px;font-weight:700;margin-bottom:10px}
.message-card p{font-size:15px;line-height:1.7;color:var(--sl)}
.card-accent-1::before{background:linear-gradient(180deg,#1DB954,#1ed760)}
.card-accent-2::before{background:linear-gradient(180deg,#f0c8a0,#e8a870)}
.card-accent-3::before{background:linear-gradient(180deg,#e8a8b0,#d88090)}
.card-accent-4::before{background:linear-gradient(180deg,#7eb8da,#5a98ba)}
.card-accent-5::before{background:linear-gradient(180deg,#c8a8e8,#a888c8)}
.final-section{text-align:center;padding:40px 0 20px;opacity:0;transform:translateY(30px);transition:opacity .8s ease .2s,transform .8s ease .2s}
.final-section.visible{opacity:1;transform:translateY(0)}
.final-section .cake-emoji{font-size:64px;display:block;margin-bottom:16px;animation:fc 3s ease-in-out infinite}
@keyframes fc{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.final-section h2{font-family:'Satisfy',cursive;font-size:36px;color:var(--sg);margin-bottom:12px}
.final-section p{color:var(--sl);font-size:15px;line-height:1.6}
.final-section .signature{margin-top:24px;font-style:italic;color:#f0c8a0;font-size:16px}
.equalizer{display:flex;align-items:flex-end;gap:3px;height:20px;margin:20px auto 0;width:fit-content}
.eq-bar{width:4px;background:var(--sg);border-radius:2px;animation:eb 1s ease-in-out infinite}
.eq-bar:nth-child(1){height:8px;animation-delay:0s}
.eq-bar:nth-child(2){height:16px;animation-delay:.15s}
.eq-bar:nth-child(3){height:10px;animation-delay:.3s}
.eq-bar:nth-child(4){height:18px;animation-delay:.1s}
.eq-bar:nth-child(5){height:6px;animation-delay:.25s}
@keyframes eb{0%,100%{transform:scaleY(.3)}50%{transform:scaleY(1)}}
@media(max-height:700px){.player-screen{padding:30px 20px 20px}.album-container{max-width:260px}.lyrics-section{height:60px}.controls{max-width:300px}.play-btn{width:54px;height:54px}.song-title{font-size:18px}}
@media(max-height:600px){.album-container{max-width:200px}.lyrics-section{height:50px}.lyric-line{font-size:13px}}
@media(max-width:380px){.album-container{max-width:280px}.bday-header h1{font-size:34px}.bday-header .bday-name{font-size:42px}}
@media(min-width:500px){.album-container{max-width:380px}}
</style>
</head>
<body>
<audio id="audioPlayer" preload="auto" src="young-dumb-broke.mp3"></audio>

<div class="player-screen" id="playerScreen">
  <div class="top-bar">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
    <span style="font-size:12px;font-weight:600;color:var(--sl);text-transform:uppercase;letter-spacing:1px">Playing from playlist</span>
    <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><circle cx="12" cy="5" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="19" r="2"/></svg>
  </div>

  <div class="album-container" onclick="openBirthday()">
    <div class="album-art">
      <img src="album-cover.jpg" alt="Asian Teen - Hanssen" style="width:100%;height:100%;object-fit:cover;border-radius:8px;">
    </div>
  </div>
  <div class="tap-hint">Tap the album cover</div>

  <div class="lyrics-section">
    <div class="lyrics-track" id="lyricsTrack"></div>
  </div>

  <div class="song-info">
    <div class="song-title-row">
      <div>
        <div class="song-title">Young Dumb & Broke</div>
        <div class="song-artist">Khalid</div>
      </div>
    </div>
  </div>

  <div class="progress-section">
    <div class="progress-bar-bg" id="progressBar">
      <div class="progress-bar-fill" id="progressFill"></div>
    </div>
    <div class="progress-times">
      <span id="currentTime">0:00</span>
      <span id="remainTime">-3:22</span>
    </div>
  </div>

  <div class="controls">
    <svg width="24" height="24" viewBox="0 0 24 24"><path d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"/></svg>
    <svg width="32" height="32" viewBox="0 0 24 24" onclick="skipBack()"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
    <div class="play-btn" onclick="togglePlay()">
      <svg id="playIcon" width="28" height="28" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
    </div>
    <svg width="32" height="32" viewBox="0 0 24 24" onclick="skipForward()"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
    <svg width="24" height="24" viewBox="0 0 24 24"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"/></svg>
  </div>
</div>

<canvas id="confetti-canvas"></canvas>
<div class="birthday-screen" id="birthdayScreen">
  <div class="birthday-inner">
    <div class="bday-back" onclick="closeBirthday()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
      <span>Back to Player</span>
    </div>
    <div class="bday-header">
      <div class="greeting-top">ðŸŽµ Lagu Lo Beut Dah Ini ðŸŽµ</div>
      <h1>Happy Birthday</h1>
      <div class="bday-name">BEBEK!</div>
      <div class="bday-sub">Today the playlist is all about you ðŸŽ§</div>
      <div class="equalizer"><div class="eq-bar"></div><div class="eq-bar"></div><div class="eq-bar"></div><div class="eq-bar"></div><div class="eq-bar"></div></div>
    </div>
    <div class="message-card card-accent-1" data-delay="0">
      <span class="card-emoji">ðŸŽ‚</span>
      <h3>Another Year, Another Chapter</h3>
      <p>Selamat ulang tahun, BEBEK! Semoga di tahun yang baru ini, semua hal-hal baik datang menghampiri lu. Lu layak dapat yang terbaik, brader!</p>
    </div>
    <div class="message-card card-accent-2" data-delay="100">
      <span class="card-emoji">ðŸŒŸ</span>
      <h3>Keep Shining, Pookie</h3>
      <p>Semoga pantat lu aman dari Bintang dan semoga lu bisa jadi versi terbaik dari diri lu!</p>
    </div>
    <div class="final-section" id="finalSection">
      <span class="cake-emoji">ðŸŽ‰</span>
      <h2>Cheers to you, Bek!</h2>
      <p>Semoga panjang umur, sehat selalu dan dikelilingi orang-orang yang sayang sama lu. Happy birthday once again!</p>
      <div class="signature">â€” Cheers,, from Aceng</div>
    </div>
  </div>
</div>

<script>
const L=[
{t:0,s:"\u266a  \u266a  \u266a"},
{t:7.31,s:"So you're still thinking of me"},
{t:10.82,s:"Just like I know you should"},
{t:14.31,s:"I cannot give you everything"},
{t:17.94,s:"You know I wish I could"},
{t:21.33,s:"I'm so high at the moment"},
{t:24.82,s:"I'm so caught up in this"},
{t:28.37,s:"Yeah, we're just young, dumb and broke"},
{t:31.63,s:"But we still got love to give"},
{t:34.49,s:"While we're young dumb"},
{t:36.04,s:"Young, young dumb and broke"},
{t:38.46,s:"Young dumb"},
{t:39.49,s:"Young, young dumb and broke"},
{t:41.98,s:"Young dumb"},
{t:43.05,s:"Young, young dumb and broke"},
{t:45.85,s:"Young dumb broke high school kids"},
{t:49.02,s:"Ya-da-da-da-da-da-da-da"},
{t:52.40,s:"Ya-da-da-da-da-da-da"},
{t:56.09,s:"Ya-da-da-da-da-da-da-da"},
{t:59.88,s:"Young dumb broke high school kids"},
{t:63.35,s:"We have so much in common"},
{t:66.93,s:"We argue all the time"},
{t:70.42,s:"You always say I'm wrong"},
{t:74.00,s:"I'm pretty sure I'm right"},
{t:77.41,s:"What's fun about commitment?"},
{t:80.70,s:"When we have our life to live"},
{t:84.36,s:"Yeah, we're just young, dumb and broke"},
{t:87.71,s:"But we still got love to give"},
{t:90.60,s:"While we're young dumb"},
{t:92.09,s:"Young, young dumb and broke"},
{t:94.51,s:"Young dumb"},
{t:95.58,s:"Young, young dumb and broke"},
{t:98.00,s:"Young dumb"},
{t:99.08,s:"Young, young dumb and broke"},
{t:101.89,s:"Young dumb broke high school kids"},
{t:105.00,s:"Ya-da-da-da-da-da-da-da"},
{t:108.47,s:"Ya-da-da-da-da-da-da"},
{t:112.04,s:"Ya-da-da-da-da-da-da-da"},
{t:115.87,s:"Young dumb broke high school kids"},
{t:118.98,s:"Jump and we think"},
{t:120.52,s:"Leave it all in the game of love"},
{t:124.12,s:"Love"},
{t:125.86,s:"Run into sin"},
{t:127.57,s:"Do it all in the name of fun"},
{t:130.76,s:"Fun"},
{t:132.49,s:"Whoa-oa-oa"},
{t:133.58,s:"I'm so high at the moment"},
{t:136.85,s:"I'm so caught up in this"},
{t:140.66,s:"Yeah, we're just young, dumb and broke"},
{t:143.93,s:"But we still got love to give"},
{t:146.96,s:"While we're young dumb"},
{t:148.61,s:"Young, young dumb and broke"},
{t:150.89,s:"Young dumb"},
{t:151.89,s:"Young, young dumb and broke"},
{t:154.15,s:"Young dumb"},
{t:155.36,s:"Young, young dumb and broke"},
{t:157.97,s:"Young dumb broke high school kids"},
{t:161.00,s:"Ya-da-da-da-da-da-da-da"},
{t:164.47,s:"Ya-da-da-da-da-da-da"},
{t:168.04,s:"Ya-da-da-da-da-da-da-da"},
{t:171.95,s:"Young dumb broke high school kids"},
{t:175.00,s:"Ya-da-da-da-da-da-da-da"},
{t:178.47,s:"Ya-da-da-da-da-da-da"},
{t:182.04,s:"Ya-da-da-da-da-da-da-da"},
{t:185.95,s:"Young dumb broke high school kids"},
{t:195.00,s:"\u266a  \u266a  \u266a"}
];

const DUR=202;
let playing=false,cIdx=-1,hasAud=true,simT=0,simI=null;
const aud=document.getElementById('audioPlayer');
const trk=document.getElementById('lyricsTrack');

L.forEach(l=>{const d=document.createElement('div');d.className='lyric-line';d.textContent=l.s;trk.appendChild(d)});

aud.addEventListener('timeupdate',()=>{if(!hasAud)return;upLyr(aud.currentTime);upProg(aud.currentTime,aud.duration||DUR)});
aud.addEventListener('ended',()=>{playing=false;upIcon()});
aud.addEventListener('error',()=>{hasAud=false});

function startSim(){if(simI)return;simI=setInterval(()=>{simT+=.2;if(simT>=DUR){simT=0;playing=false;upIcon();clearInterval(simI);simI=null;resetLyr();return}upLyr(simT);upProg(simT,DUR)},200)}
function stopSim(){if(simI){clearInterval(simI);simI=null}}

function upLyr(ct){
  let ni=-1;
  for(let i=L.length-1;i>=0;i--){if(ct>=L[i].t){ni=i;break}}
  if(ni===cIdx)return;cIdx=ni;
  const ls=trk.children;
  for(let i=0;i<ls.length;i++){ls[i].classList.remove('active','passed');if(i===ni)ls[i].classList.add('active');else if(i<ni)ls[i].classList.add('passed')}
  if(ni>=0){const lh=ls[0].offsetHeight;trk.style.transform='translateY(-'+ni*lh+'px)'}
}
function resetLyr(){cIdx=-1;const ls=trk.children;for(let i=0;i<ls.length;i++)ls[i].classList.remove('active','passed');trk.style.transform='translateY(0)';upProg(0,DUR)}

function upProg(c,d){
  document.getElementById('progressFill').style.width=(c/d*100)+'%';
  document.getElementById('currentTime').textContent=fmt(c);
  document.getElementById('remainTime').textContent='-'+fmt(d-c);
}
function fmt(s){const m=Math.floor(s/60),sc=Math.floor(s%60);return m+':'+(sc<10?'0':'')+sc}

document.getElementById('progressBar').addEventListener('click',function(e){
  const p=(e.clientX-this.getBoundingClientRect().left)/this.offsetWidth;
  if(hasAud){aud.currentTime=p*(aud.duration||DUR)}else{simT=p*DUR;upLyr(simT);upProg(simT,DUR)}
});

function togglePlay(){
  playing=!playing;upIcon();
  if(hasAud){playing?aud.play().catch(()=>{}):aud.pause()}
  else{playing?startSim():stopSim()}
}
function upIcon(){
  const i=document.getElementById('playIcon');
  i.innerHTML=playing?'<rect x="6" y="4" width="4" height="16" rx="1"/><rect x="14" y="4" width="4" height="16" rx="1"/>':'<path d="M8 5v14l11-7z"/>';
}
function skipBack(){if(hasAud)aud.currentTime=Math.max(0,aud.currentTime-10);else{simT=Math.max(0,simT-10);upLyr(simT);upProg(simT,DUR)}}
function skipForward(){if(hasAud)aud.currentTime=Math.min(aud.duration||DUR,aud.currentTime+10);else{simT=Math.min(DUR,simT+10);upLyr(simT);upProg(simT,DUR)}}

function openBirthday(){document.getElementById('birthdayScreen').classList.add('active');document.getElementById('playerScreen').classList.add('hidden');launchConfetti();setTimeout(obsCards,300)}
function closeBirthday(){document.getElementById('birthdayScreen').classList.remove('active');document.getElementById('playerScreen').classList.remove('hidden')}

function obsCards(){
  const cards=document.querySelectorAll('.message-card,.final-section');
  const obs=new IntersectionObserver(es=>{es.forEach(e=>{if(e.isIntersecting){const d=e.target.dataset.delay||0;setTimeout(()=>e.target.classList.add('visible'),d)}})},{threshold:.15,root:document.getElementById('birthdayScreen')});
  cards.forEach(c=>obs.observe(c));
}

function launchConfetti(){
  const cv=document.getElementById('confetti-canvas'),cx=cv.getContext('2d');
  cv.width=innerWidth;cv.height=innerHeight;
  const cols=['#1DB954','#f0c8a0','#e8a8b0','#7eb8da','#fff','#1ed760','#ff6b6b','#ffd93d'];
  const ps=[];
  for(let i=0;i<120;i++)ps.push({x:Math.random()*cv.width,y:Math.random()*cv.height-cv.height,w:Math.random()*10+4,h:Math.random()*6+3,c:cols[Math.floor(Math.random()*cols.length)],sp:Math.random()*3+2,a:Math.random()*Math.PI*2,sn:(Math.random()-.5)*.1,dr:(Math.random()-.5)*1.5,o:1});
  let fr=0;
  function anim(){
    cx.clearRect(0,0,cv.width,cv.height);fr++;
    ps.forEach(p=>{p.y+=p.sp;p.x+=p.dr+Math.sin(p.a)*.5;p.a+=p.sn;if(fr>120)p.o-=.008;cx.save();cx.translate(p.x,p.y);cx.rotate(p.a);cx.globalAlpha=Math.max(0,p.o);cx.fillStyle=p.c;cx.fillRect(-p.w/2,-p.h/2,p.w,p.h);cx.restore()});
    if(fr<300&&ps.some(p=>p.o>0))requestAnimationFrame(anim);else cx.clearRect(0,0,cv.width,cv.height);
  }
  anim();
}

addEventListener('resize',()=>{const c=document.getElementById('confetti-canvas');c.width=innerWidth;c.height=innerHeight});
upProg(0,DUR);
</script>
</body>
</html>
